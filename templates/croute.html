<!DOCTYPE html>
<html>

<head>
    <script src="../static/lesFonctions.js"></script>
    <script src="../static/lesClasses.js"></script>
    <style>
        .cache {
            display: none;
        }
    </style>
</head>

<body>
    <!-- section menu -->
    <ul style="list-style-type: none;">
        <li style="float:left;"><a href="commande">Commande</a>&nbsp;&nbsp;&nbsp;&nbsp;</li>
        <li style="float:left;"><a href="client">Client</a>&nbsp;&nbsp;&nbsp;&nbsp;</li>
        <li style="float:left;"><a href="pizza">Pizza</a>&nbsp;&nbsp;&nbsp;&nbsp;</li>
        <li><a href="#" onclick="afficherOuCacher()">Aliments</a>
            <ul id="sousmenu" style="list-style-type: none;" class="cache">
                <li style="float:left;"><a href="croute">Croute</a>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li style="float:left;"><a href="fromage">Fromage</a>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                <li><a href="garniture">Garniture</a></li>
            </ul>
        </li>
    </ul>

    <!-- section formulaire -->
    <h2>Croute</h2>
    <table>
        <tr>
            <td><label for="nomCroute">Nom:</label></td>
            <td><input id="nomCroute"> </input></td>
        </tr>
        <tr>
            <td><label for="">Poids:</label></td>
            <td><input id="poidsCroute"> </input>(gr)</td>
        </tr>
        <tr>
            <td><label for="">Type:</label></td>
            <td>
                <select id="typeCroute">
                    <option value="mince">Mince</option>
                    <option value="epaisse" selected>Ã‰paisse</option>
                </select>                
            </td>
        </tr>
        <tr>
            <td><label for="">Prix:</label></td>
            <td><input id="prixCroute"> </input></td>
        </tr>
        <tr>
            <td colspan="2"><button type="button" id="btnInstancier" onclick="instancier()">Instancier</button>
            </td>
        </tr>
    </table> 

    <p id="retour"> {{message}}
    </p>

    <form id="frmCroute" action="#" method="post" hidden>
        <textarea rows="2" cols="60" id="instanceCroute" name="instanceCroute" readonly></textarea>
        <br>
        <input type="submit" id="btnEnregistrer" value="Enregistrer"/>
    </form>

</body>

<script>
    function instancier() {
        var retour = document.getElementById("retour");
        retour.innerHTML = "";

        if (document.getElementById("nomCroute").value.length == 0) {
            retour.innerHTML = "Erreur: Nom de la Croute vide";
        }
        else if (document.getElementById("poidsCroute").value.length == 0) {
            retour.innerHTML = "Erreur: Poids de la Croute vide";
        }
        else if (document.getElementById("prixCroute").value.length == 0) {
            retour.innerHTML = "Erreur: Prix de la Croute vide";
        }
        else {
            instancierCroute();
        }
 
    }

    function instancierCroute() {
        var cr1 = new Croute(
            document.getElementById("nomCroute").value,
            parseInt(document.getElementById("poidsCroute").value),
            document.getElementById("typeCroute").value,
            parseInt(document.getElementById("prixCroute").value)
        );

        document.getElementById("instanceCroute").value = JSON.stringify(cr1);
        if(document.getElementById("instanceCroute").value != ""){
            document.getElementById("frmCroute").hidden = false;
        }
    }

</script>

</html>